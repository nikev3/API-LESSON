<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Lynn Schirmer for CFA 2023">
    <title>Fetch a Dog!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <main>
        <section>
            <div class="inputs">
                <h1 class="page-title">Fetch a Dog!</h1>
                <!--
                <label for="breeds">Select by Breed</label>
                <select id="breeds"></select>-->
                <button id="fetch-btn">Fetch</button>
            </div>
            <div class="photo">
                <img id="dog-pic" src="placeholder.png">
            </div>
        </section>
    </main>

    <script>
        //Pre-selected DOM objects
        const dogPic = document.querySelector('#dog-pic');
        const btn = document.querySelector('#fetch-btn');
        const select = document.querySelector('#breeds');

        //Unsplash random image by keyword url
        const backgroundImg = "http://source.unsplash.com/1600x900/?";
        //Dog API endpoint
        const dogApi = "https://api.thedogapi.com/v1/images/search";

        //Extra credit: Add your own API key, get one here: https://thecatapi.com/signup
        const apiKey = "";
        //Extra credit: Breeds list API
        const breedsApi = "https://api.thedogapi.com/v1/breeds";
        //Extra credit: Dogs by breed API
        const dogByBreedApi = "https://api.thedogapi.com/v1/images/search?breed_ids=";

        /* Exercise 1: Simple GET request, use a random dog photo for the page background
        1. Select the body tag and assign it a variable.
        2. Use the style property to set its background picture to the unsplash backgroundImg + "dog" */
       



        /* Exercise 2: Use fetch() to get a response from the dog API
        1. Create an async function called fetchDog.
        2. Inside fetchDog, add a try...catch block.
        3. Inside try, create a variable called response with the value await fetch(), pass fetch the dogApi. Log response in the console.
        4. Inside catch, console any error.
        5. Call the function. */


        /* Exercise 3: Exploring status codes
        1. Inside try, log response.status in the console. */

    

      
        
        /* Exercise 4: Convert the API response to JSON
        1. Inside fetchDog(), inside try: return response.json(); Make sure to use the await operator
        2. Outside the function, remove the previous function call
        3. Create a variable with the function call as value, and log it in the console
        */





        /*Exercise 5: Showing the dog on the page
        1. Create another async function called showDog.
        2. Inside showDog, create a variable called dog with value await fetchDog().
        3. Log dog in the console.
        4. Set the src value of dogPic to the url. 
        5. Call the showDog function. 
        Activating the fetch button
        6. Add a click event listener to the fetch button to call showDog */

       




        /* Extra credit: Fetch dogs by breed 
        Authentication and params
        The dog API requires some security in order to access dogs by breeds.

        1. Get an API key! Sometimes APIs want to know who is using their service. An API key is a unique identifier you send along with your request, like login credentials. Get one here: https://thecatapi.com/signup and paste it as the value of the variable on line 44.
        2. Create an object called params with 2 key and value pairs: 
            method: 'GET',
            headers: {
                Authentication: 'secret',
                'x-api-key': apiKey
            }
        These paramters do 2 things, set the method of our request, and send our API key with the request.

        Showing and populating the breed selection drop down.
        1. Uncomment the label and select tags
        2. Create 2 new async functions, fetchBreeds and showBreeds 
        3. Inside fetchbreeds, use a try...catch block as before, and have it return the list of breeds in json
        Make sure to include params as second argument to fetch()
        let response = await fetch(breedsApi, params)
        4. Inside showBreeds, use forEach() to loop through and show each breed in an option tag inside the select tag. Set the value property of each option tag to the breed id

        Editing fetchDog to get a dog by breed
        1. Inside the fetchDog function, create variable called breed, set its value to the value of the selected breed. 
        2. Edit the first argument of fetch() to dogByBreedApi + breed
        3. Add params as the second argument */

    </script>

</body>

</html>